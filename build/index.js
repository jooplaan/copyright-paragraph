(()=>{"use strict";const t=window.wp.blocks,e=window.wp.i18n;(0,t.registerBlockVariation)("core/paragraph",{name:"copyright-paragraph",title:(0,e.__)("Copyright Text","copyright-paragraph"),description:(0,e.__)("Add Â© + current year + site title","copyright-paragraph"),attributes:{content:"",metadata:{bindings:{content:{source:"copyright-paragraph/copyright",args:{startYear:(new Date).getFullYear().toString(),customName:""}}}}},scope:["inserter"],icon:"admin-site-alt3"});const r=window.wp.hooks,a=window.wp.element,o=window.wp.data,n=window.wp.compose,i=window.wp.blockEditor,s=window.wp.components,c=window.ReactJSXRuntime;console.log("ðŸ§  edit.js is geladen");const p=(0,n.createHigherOrderComponent)((t=>r=>{const{name:a,attributes:n}=r;if("core/paragraph"!==a)return(0,c.jsx)(t,{...r});const s=n?.metadata?.bindings?.content;if(!s||"copyright-paragraph/copyright"!==s.source)return(0,c.jsx)(t,{...r});const p=s.args||{},g=parseInt(p.startYear,10),l=p.customName?.trim(),d=(new Date).getFullYear(),h=g&&g<d?`${g} â€“ ${d}`:d,u=(0,o.useSelect)((t=>{const r=t("core").getEntityRecord("root","site");return r?.title||(0,e.__)("Site Title","copyright-paragraph")}),[]),m=`Â© ${h} ${l||u}`;return(0,c.jsx)("div",{...r,children:(0,c.jsx)(i.RichText,{tagName:"p",value:m,readOnly:!0})})}),"withCopyrightEditPreview");(0,r.addFilter)("editor.BlockEdit","copyright-paragraph/edit-preview",p);const g=(0,n.createHigherOrderComponent)((t=>r=>{const{name:n,attributes:p,clientId:g}=r;if("core/paragraph"!==n)return(0,c.jsx)(t,{...r});const l=p?.metadata?.bindings?.content;if(!l||"copyright-paragraph/copyright"!==l.source)return(0,c.jsx)(t,{...r});const d=l.args||{},h=d.startYear||"",u=d.customName||"",{updateBlockAttributes:m}=(0,o.useDispatch)("core/block-editor"),w=(t,e)=>{m(g,{metadata:{...p.metadata,bindings:{...p.metadata.bindings,content:{...p.metadata.bindings.content,args:{...d,[t]:e}}}}})};return(0,c.jsxs)(a.Fragment,{children:[(0,c.jsx)(t,{...r}),(0,c.jsx)(i.InspectorControls,{children:(0,c.jsxs)(s.PanelBody,{title:(0,e.__)("Copyright Settings","copyright-paragraph"),initialOpen:!0,children:[(0,c.jsx)(s.TextControl,{label:(0,e.__)("Custom Name","copyright-paragraph"),value:u,onChange:t=>w("customName",t),placeholder:(0,e.__)("Leave empty to use site title","copyright-paragraph")}),(0,c.jsx)(s.TextControl,{label:(0,e.__)("Start Year","copyright-paragraph"),type:"number",inputMode:"numeric",pattern:"[0-9]*",value:h,onChange:t=>{const e=t.replace(/\D/g,"");w("startYear",e)},placeholder:(new Date).getFullYear(),min:"1900",max:(new Date).getFullYear()})]})})]})}),"withCopyrightInspectorControls");(0,r.addFilter)("editor.BlockEdit","copyright-paragraph/inspector-controls",g);const l=window.wp.coreData;(0,t.registerBlockBindingsSource)({name:"copyright-paragraph/copyright",label:(0,e.__)("Copyright Info","copyright-paragraph"),usesContext:["postType","postId","post"],getValues({select:t,context:r,sourceArgs:a}){if(!a||void 0===a.startYear||void 0===a.customName)try{const t=r?.block,e=t?.attributes?.metadata?.bindings?.content?.args;e&&(a={...a,...e})}catch(t){console.warn("â›” Can't deduct sourceArgs from block context:",t)}const{getEntityRecord:o,getIsResolving:n}=t(l.store);if(n("root","site"))return{};const i=o("root","site"),s=i?.title||(0,e.__)("Site title","copyright-paragraph"),c=(new Date).getFullYear(),p=parseInt(a?.startYear,10),g=a?.customName?.trim();return{content:`Â© ${p&&p<c?`${p} â€“ ${c}`:c} ${g||s}`}}})})();